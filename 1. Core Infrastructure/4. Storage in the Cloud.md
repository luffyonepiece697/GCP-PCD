# Google Cloud Storage Options

* Every application needs to store data, like media to be streamed or perhaps even sensor data from devices, and 
  different applications and workloads require different storage database solutions.

* Google Cloud has storage options for structured, unstructured, transactional, and relational data.

* Google Cloud’s five core storage products are:-
  1. Cloud Storage
  2. Cloud SQL
  3. Spanner
  4. Firestore
  5. Bigtable.

* Depending on your application, you might use one or several of these services to do the job.

## 1. Cloud Storage

* Cloud Storage, which is a service that offers developers and IT organizations durable and highly available object storage.


* Object storage is a computer data storage architecture that manages data as “objects” and not as a file and 
  folder hierarchy (file storage), or as chunks of a disk (block storage).
* These objects are stored in a packaged format which contains the binary form of the actual data itself, as well as relevant associated 
  meta-data (such as date created, author, resource type, and permissions), and a globally unique identifier.
* These unique keys are in the form of URLs, which means object storage interacts well with web technologies.
* Data commonly stored as objects include video, pictures, and audio recordings.


* Cloud Storage is Google’s object storage product.
* It allows customers to store any amount of data, and to retrieve it as often as needed.
* It’s a fully managed scalable service that has a wide variety of uses.
* A few examples include serving website content, storing data for archival and disaster recovery, and distributing large data objects to 
  end users via Direct Download.
* Cloud Storage’s primary use is whenever binary large-object storage (also known as a “BLOB”) is needed for online content such as 
  videos and photos, for backup and archived data and for storage of intermediate results in processing workflows.
* Cloud Storage files are organized into buckets.


* A bucket needs a globally unique name and a specific geographic location for where it should be stored, and an ideal location for a 
  bucket is where latency is minimized.
* For example, if most of your users are in Europe, you probably want to pick a European location, so either a specific Google Cloud region 
  in Europe, or else the EU multi-region.

  
* The storage objects offered by Cloud Storage are immutable, which means that you do not edit them, but instead a new version is created with every change made.
* Administrators have the option to either allow each new version to completely overwrite the older one, or to keep track of each 
  change made to a particular object by enabling “versioning” within a bucket.
* If you choose to use versioning, Cloud Storage will keep a detailed history of modifications -- that is, overwrites or deletes -- of all 
  objects contained in that bucket.
* If you don’t turn on object versioning, by default new versions will always overwrite older versions.
* With object versioning enabled, you can list the archived versions of an object, restore an object to an older state, or permanently 
  delete a version of an object, as needed.

  
* In many cases, personally identifiable information may be contained in data objects, so controlling access to stored data is essential    to ensuring security and privacy are maintained.
* Using IAM roles and, where needed, access control lists (ACLs), organizations can conform to security best practices, which require each
  user to have access and permissions to only the resources they need to do their jobs, and no more than that.
* There are a couple of options to control user access to objects and buckets.
* For most purposes, IAM is sufficient.
* Roles are inherited from project to bucket to object.
* If you need finer control, you can create access control lists.
* Each access control list consists of two pieces of information.
    i. Scope, which defines who can access and perform an action.
       * This can be a specific user or group of users.
    ii.permission, which defines what actions can be performed, like read or write.

    
* Because storing and retrieving large amounts of object data can quickly become expensive, Cloud Storage also offers lifecycle management policies.
* For example, you could tell Cloud Storage to delete objects older than 365 days; or to delete objects created before
  January 1, 2013;or to keep only the 3 most recent versions of each object in a bucket that has versioning enabled.
* Having this control ensures that you’re not paying for more than you actually need.



### Cloud Storage: Storage Classes and Data Transfer

* There are four primary storage classes in Cloud Storage :-
  1. Standard Storage
  2. Nearline Storage
  3. Coldline Storage
  4. Archive Storage
  
* Standard Storage is considered best for frequently accessed, or “hot,” data.
* It’s also great for data that’s stored for only brief periods of time.


* Nearline Storage is best for storing infrequently accessed data, like reading or modifying data on average once a month or less.
* Examples might include data backups, long-tail multimedia content, or data archiving.


* Coldline Storage is also a low-cost option for storing infrequently accessed data.
* However, as compared to Nearline Storage, Coldline Storage is meant for reading or modifying data, at most, once every 90 days.


* Archive Storage is the lowest-cost option, used ideally for data archiving, online backup, and disaster recovery.
* It’s the best choice for data that you plan to access less than once a year, because it has higher costs for data access 
  and operations and a 365-day minimum storage duration.


* Although each of these four classes has differences, it’s worth noting there are several characteristics that apply across all of these storage classes.
* These include: Unlimited storage with no minimum object size requirement, worldwide accessibility and locations, low latency and high durability, 
  a uniform experience, which extends to security, tools, and APIs, and geo-redundancy if data is stored in a multi-region or dual-region.
* This means placing physical servers in geographically diverse data centers to protect against catastrophic events and natural disasters, and 
  load-balancing traffic for optimal performance.

  
* Cloud Storage also provides a feature called Autoclass, which automatically transitions objects to appropriate storage classes based on 
  each object's access pattern.
* The feature moves data that is not accessed to colder storage classes to reduce storage cost and moves data that is accessed to Standard 
  storage to optimize future accesses.
* Autoclass simplifies and automates cost saving for your Cloud Storage data.


* Cloud Storage has no minimum fee because you pay only for what you use, and prior provisioning of capacity isn’t necessary.
* And from a security perspective, Cloud Storage always encrypts data on the server side, before it’s written to disk, at no additional charge.
* Data traveling between a customer’s device and Google is encrypted by default using HTTPS/TLS, which is Transport Layer Security.


* Regardless of which storage class you choose, there are several ways to bring data into Cloud Storage.
* Many customers simply carry out their own online transfer using gcloud storage, which is the Cloud Storage command from the Cloud SDK.
* Data can also be moved in by using a drag and drop option in the Cloud Console, if accessed through the Google Chrome web browser.



* But what if you have to upload terabytes or even petabytes of data?

1. Storage Transfer Service enables you to import large amounts of online data into Cloud Storage quickly and cost-effectively.
   * The Storage Transfer Service lets you schedule and manage batch transfers to Cloud Storage from another cloud provider, from a 
     different Cloud Storage region, or from an HTTP(S) endpoint.
2. Transfer Appliance, which is a rackable, high-capacity storage server that you lease from Google Cloud.
   * You connect it to your network, load it with data, and then ship it to an upload facility where the data is uploaded to Cloud Storage.
   * You can transfer up to a petabyte of data on a single appliance.

   
* Cloud Storage’s tight integration with other Google Cloud products and services means that there are many additional ways to move data into the service.
* For example, you can import and export tables to and from both BigQuery and Cloud SQL.
* You can also store App Engine logs, Firestore backups, and objects used by App Engine applications, like images.
* Cloud Storage can also store instance startup scripts, Compute Engine images, and objects used by Compute Engine applications.



## 2. Cloud SQL


* Cloud SQL offers fully managed relational databases, including MySQL, PostgreSQL, and SQL Server as a service.
* It’s designed to hand off mundane, but necessary and often time-consuming, tasks to Google—like applying patches and updates 
  managing backups, and configuring replications—so your focus can be on building great applications.
* Cloud SQL doesn't require any software installation or maintenance.
* It can scale up to 128 processor cores, 864 GB of RAM, and 64 TB of storage.
* It supports automatic replication scenarios, such as from a Cloud SQL primary instance, an external primary instance, and external MySQL instances.
* Cloud SQL supports managed backups, so backed-up data is securely stored and accessible if a restore is required.
* The cost of an instance covers seven backups.
* Cloud SQL encrypts customer data when on Google’s internal networks and when stored in database tables, temporary files, and backups.
* And it includes a network firewall, which controls network access to each database instance.
* A benefit of Cloud SQL instances is that they are accessible by other Google Cloud services, and even external services.
* Cloud SQL can be used with App Engine using standard drivers like Connector/J for Java or MySQLdb for Python.
* Compute Engine instances can be authorized to access Cloud SQL instances and configure the Cloud SQL instance to be in the same zone as your virtual machine.
* Cloud SQL also supports other applications and tools that you might use, like SQL Workbench, Toad, and other external applications using standard MySQL drivers.

## 3. Spanner

* Spanner is a fully managed relational database service that scales horizontally, is strongly consistent, and speaks SQL.
* Battle tested by Google’s own mission-critical applications and services, Spanner is the service that powers Google’s $80 billion business.
* Spanner is especially suited for applications that require a SQL relational database management system with joins and secondary indexes, 
  built-in high availability, strong global consistency, and high numbers of input and output operations per second.
* We’re talking tens of thousands of reads and writes per second or more.


## 4. Firestore

* Firestore is a flexible, horizontally scalable, NoSQL cloud database for mobile, web, and server development.
* With Firestore, data is stored in documents and then organized into collections.
* Documents can contain complex nested objects in addition to subcollections.
* Each document contains a set of key-value pairs.
* For example, a document to represent a user has the keys for the firstname and lastname with the associated values.
* Firestore’s NoSQL queries can then be used to retrieve individual, specific documents or to retrieve all the documents in a collection 
  that match your query parameters.
* Queries can include multiple, chained filters and combine filtering and sorting options.
* They're also indexed by default, so query performance is proportional to the size of the result set, not the dataset.
* Firestore uses data synchronization to update data on any connected device.
* However, it's also designed to make simple, one-time fetch queries efficiently.
* It caches data that an app is actively using, so the app can write, read, listen to, and query data even if the device is offline.
* When the device comes back online, Firestore synchronizes any local changes back to Firestore.
* Firestore leverages Google Cloud’s powerful infrastructure: automatic multi-region data replication, strong consistency guarantees, 
  atomic batch operations, and real transaction support.

## 5. BigTable

* Bigtable is Google's NoSQL big data database service.
* It's the same database that powers many core Google services, including Search, Analytics, Maps, and Gmail.
* Bigtable is designed to handle massive workloads at consistent low latency and high throughput, so it's a great choice for 
  both operational and analytical applications, including Internet of Things, user analytics, and financial data analysis.
* When deciding which storage option is best, customers often choose Bigtable if: 
  1. They’re working with more than 1TB of semi-structured or structured data.
  2. Data is fast with high throughput, or it’s rapidly changing.
  3. They’re working with NoSQL data. 
     * This usually means transactions where strong relational semantics are not required.
  4. Data is a time-series or has natural semantic ordering.
  5. They’re working with big data, running asynchronous batch or synchronous real-time processing on the data. 
  6. They’re running machine learning algorithms on the data.
* Bigtable can interact with other Google Cloud services and third-party clients.
* Using APIs, data can be read from and written to Bigtable through a data service layer like Managed VMs, the HBase REST Server, 
  or a Java Server using the HBase client.
* Typically this is used to serve data to applications, dashboards, and data services.
* Data can also be streamed in through a variety of popular stream processing frameworks like Dataflow Streaming, Spark Streaming, and Storm.
* And if streaming is not an option, data can also be read from and written to Bigtable through batch processes like Hadoop MapReduce, Dataflow, or Spark.
* Often, summarized or newly calculated data is written back to Bigtable or to a downstream database.


# Comparing Storage Options

* Consider using Cloud Storage if you need to store immutable blobs larger than 10 megabytes, such as large images or movies.
* This storage service provides petabytes of capacity with a maximum unit size of 5 terabytes per object.


* Consider using Cloud SQL or Spanner if you need full SQL support for an online transaction processing system.
* Cloud SQL provides up to 64 terabytes, depending on machine type, and Spanner provides petabytes.
* Cloud SQL is best for web frameworks and existing applications, like storing user credentials and customer orders.


* If Cloud SQL doesn’t fit your requirements because you need horizontal scalability, not just through read replicas, consider using Spanner.
* Consider Firestore if you need massive scaling and predictability together with real time query results and offline query support.
* This storage service provides terabytes of capacity with a maximum unit size of 1 megabyte per entity.
* Firestore is best for storing, syncing, and querying data for mobile and web apps.


* Finally, consider using Bigtable if you need to store a large number of structured objects.
* Bigtable doesn’t support SQL queries, nor does it support multi-row transactions.
* This storage service provides petabytes of capacity with a maximum unit size of 10 megabytes per cell and 100 megabytes per row.
* Bigtable is best for analytical data with heavy read and write events, like AdTech, financial, or IoT data.


* Depending on your application, it’s possible that you might use one, or several, of these services to do the job.
* You may have noticed that BigQuery hasn’t been mentioned in this section of the course.
* This is because it sits on the edge between data storage and data processing, and is covered in more depth in other courses.
* The usual reason to store data in BigQuery is so you can use its big data analysis and interactive querying capabilities, 
  but it’s not purely a data storage product.


#### Modify the Access Control List of the object so that it's readable by everyone:

<code>gsutil acl ch -u allUsers:R gs://#DEVSHELL_PROJECT_ID/my-excellent-blog.png</code>



